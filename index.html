<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>CricFoot | Elite Match Highlights</title>
    <meta name="description" content="Watch HD Cricket and Football highlights. IPL, EPL, and more.">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5525538810839147" crossorigin="anonymous"></script>

    <style>
        :root[data-theme="light"] {
            --bg-main: #f1f5f9; --bg-card: #ffffff; --text-main: #0f172a;
            --text-muted: #64748b; --accent: #2563eb; --border: #cbd5e1;
            --nav-bg: rgba(255, 255, 255, 0.95);
        }
        :root[data-theme="dark"] {
            --bg-main: #0b0f1a; --bg-card: #161e2d; --text-main: #f1f5f9;
            --text-muted: #94a3b8; --accent: #38bdf8; --border: #1e293b;
            --nav-bg: rgba(11, 15, 26, 0.95);
        }

        body { font-family: 'Outfit', sans-serif; background-color: var(--bg-main); color: var(--text-main); transition: 0.3s; }
        .content-width { max-width: 1000px; margin: 0 auto; width: 100%; }

        .navbar { backdrop-filter: blur(12px); background: var(--nav-bg); border-bottom: 1px solid var(--border); padding: 0.8rem 0; position: sticky; top: 0; z-index: 1000; }
        .nav-container { display: flex; justify-content: space-between; align-items: center; padding: 0 15px; }

        .logo-box { display: flex; align-items: center; text-decoration: none; gap: 10px; color: var(--text-main); }
        .logo-icon { width: 35px; height: 35px; background: var(--accent); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; }
        
        .category-grid { display: flex; flex-wrap: wrap; gap: 8px; margin: 1.5rem 0; }
        .cat-btn { background: var(--bg-card); border: 1px solid var(--border); color: var(--text-main); padding: 5px 12px; border-radius: 50px; cursor: pointer; transition: 0.2s; font-weight: 500; font-size: 0.75rem; }
        .cat-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        .match-card { background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; height: 100%; transition: 0.3s; }
        .match-card:hover { transform: translateY(-4px); border-color: var(--accent); }
        
        .thumb-box { position: relative; aspect-ratio: 16/9; overflow: hidden; background: #000; }
        .thumb-box img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.4); }
        
        .recent-badge { position: absolute; top: 8px; left: 8px; background: #ff0000; color: white; border-radius: 3px; font-weight: 700; display: flex; align-items: center; z-index: 10; padding: 2px 6px; font-size: 10px; gap: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); letter-spacing: 0.5px; }
        .blink-dot { background: white; border-radius: 50%; animation: blinker 1.2s infinite; width: 5px; height: 5px; }
        @keyframes blinker { 50% { opacity: 0; } }

        .overlay-content { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px; }
        .team-name-overlay { color: white; font-weight: 800; font-size: clamp(0.75rem, 1.8vw, 1.2rem); text-transform: uppercase; text-shadow: 2px 2px 10px rgba(0,0,0,1); text-align: center; max-width: 90%; }
        
        .vs-circle { width: clamp(28px, 3.5vw, 42px); height: clamp(28px, 3.5vw, 42px); background: white; color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: clamp(0.65rem, 0.8vw, 0.9rem); border: 2px solid var(--accent); margin: 6px 0; box-shadow: 0 0 10px rgba(0,0,0,0.5); }

        .card-content { padding: 0.8rem; }
        .match-title { font-weight: 700; font-size: 0.85rem; color: var(--text-main); display: block; margin-bottom: 8px; line-height: 1.3; }

        .pagination-container { display: flex; justify-content: center; gap: 6px; margin: 2rem 0; flex-wrap: wrap; }
        .page-link { background: var(--bg-card); border: 1px solid var(--border); color: var(--text-main); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 600; }
        .page-link.active { background: var(--accent); color: white; border-color: var(--accent); }

        .theme-toggle { width: 35px; height: 35px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg-card); color: var(--text-main); cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* Ad Container Styling */
        .ad-row-wrapper { width: 100%; grid-column: 1 / -1; margin: 10px 0; display: flex; justify-content: center; }

        @media (max-width: 576px) {
            .g-4 { --bs-gutter-x: 0.6rem; --bs-gutter-y: 0.6rem; }
            .recent-badge { top: 6px; left: 6px; padding: 1px 5px; font-size: 9px; }
        }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="nav-container content-width">
        <a href="/" class="logo-box">
            <div class="logo-icon"><i class="bi bi-play-fill"></i></div>
            <span class="fs-5 fw-bold">CRICFOOT</span>
        </a>
        <button class="theme-toggle" id="themeSwitch"><i class="bi bi-moon-stars-fill" id="themeIcon"></i></button>
    </div>
</nav>

<div class="container mt-3 content-width">
    <div class="category-grid" id="categoryContainer"></div>
    <div id="loader" class="text-center py-5"><div class="spinner-border text-primary"></div></div>
    <div class="row row-cols-2 row-cols-lg-3 g-4" id="matchGrid"></div>
    <div class="pagination-container" id="pagination"></div>
</div>

<script>
    const themeBtn = document.getElementById('themeSwitch');
    const doc = document.documentElement;

    themeBtn.addEventListener('click', () => {
        const target = doc.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        doc.setAttribute('data-theme', target);
        document.getElementById('themeIcon').className = target === 'light' ? 'bi bi-moon-stars-fill' : 'bi bi-sun-fill';
    });

    let allMatches = [], filteredMatches = [], currentPage = 1;
    const matchesPerPage = 15;

    const googleAdCode = `
        <div class="ad-row-wrapper">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-5525538810839147"
                 data-ad-slot="4345862479"
                 data-ad-format="horizontal"
                 data-full-width-responsive="true"></ins>
            <script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>
        </div>`;

    async function init() {
        try {
            const res = await fetch('https://yosintv-api.pages.dev/api/highlights.json');
            allMatches = await res.json();
            allMatches.sort((a, b) => new Date(b.date) - new Date(a.date));
            filteredMatches = allMatches;
            renderCategories();
            updateDisplay();
            document.getElementById('loader').style.display = 'none';
        } catch (e) { console.error(e); }
    }

    function renderCategories() {
        const container = document.getElementById('categoryContainer');
        const cats = ['All', ...new Set(allMatches.map(m => m.category))];
        container.innerHTML = cats.map(c => `<button class="cat-btn ${c==='All'?'active':''}" onclick="filter('${c}', this)">${c}</button>`).join('');
    }

    function updateDisplay() {
        const start = (currentPage - 1) * matchesPerPage;
        const pageItems = filteredMatches.slice(start, start + matchesPerPage);
        const grid = document.getElementById('matchGrid');
        
        const now = new Date();
        const threshold = new Date(now.getTime() - (2 * 24 * 60 * 60 * 1000));
        
        // Check for PC (Desktop) or Mobile
        const adInterval = window.innerWidth >= 992 ? 6 : 4;

        let htmlContent = "";
        pageItems.forEach((m, index) => {
            const matchDate = new Date(m.date);
            const isRecent = matchDate >= threshold;
            const bg = m.thumbnail && m.thumbnail.length > 10 ? m.thumbnail : 
                (m.category.toLowerCase().includes('cricket') ? "https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=600" : "https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600");

            htmlContent += `
            <div class="col">
                <div class="match-card">
                    <div class="thumb-box">
                        ${isRecent ? '<div class="recent-badge"><div class="blink-dot"></div>RECENT</div>' : ''}
                        <img src="${bg}" alt="Match">
                        <div class="overlay-content">
                            <div class="team-name-overlay">${m.team1}</div>
                            <div class="vs-circle">VS</div>
                            <div class="team-name-overlay">${m.team2}</div>
                        </div>
                    </div>
                    <div class="card-content">
                        <span class="match-title">${m.team1} vs ${m.team2} | ${m.category}</span>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted" style="font-size: 0.7rem;">${m.date}</small>
                            <a href="highlights.html?id=${m.id}" class="btn btn-primary btn-sm fw-bold">Watch</a>
                        </div>
                    </div>
                </div>
            </div>`;

            // Insert Ad after every X matches
            if ((index + 1) % adInterval === 0) {
                htmlContent += googleAdCode;
            }
        });

        grid.innerHTML = htmlContent;
        renderPagination();
    }

    function renderPagination() {
        const totalPages = Math.ceil(filteredMatches.length / matchesPerPage);
        const container = document.getElementById('pagination');
        container.innerHTML = '';
        if(totalPages <= 1) return;
        for (let i = 1; i <= totalPages; i++) {
            const btn = document.createElement('button');
            btn.className = `page-link ${i === currentPage ? 'active' : ''}`;
            btn.innerText = i;
            btn.onclick = () => { currentPage = i; updateDisplay(); window.scrollTo({top: 0, behavior: 'smooth'}); };
            container.appendChild(btn);
        }
    }

    function filter(cat, btn) {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filteredMatches = cat === 'All' ? allMatches : allMatches.filter(m => m.category === cat);
        currentPage = 1;
        updateDisplay();
    }
    window.onload = init;
</script>
</body>
</html>
